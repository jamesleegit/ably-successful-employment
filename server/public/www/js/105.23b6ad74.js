"use strict";(self["webpackChunkvue"]=self["webpackChunkvue"]||[]).push([[105],{742:function(i,s,t){t.d(s,{Z:function(){return ti}});var e=t(3396),a=t(9242),n=t(7139);const l=i=>((0,e.dD)("data-v-3279f0ab"),i=i(),(0,e.Cn)(),i),o={class:"container"},r={key:0,style:{"max-width":"350px",margin:"0 auto"}},d=l((()=>(0,e._)("div",{class:"label"},"이메일",-1))),u={class:"input-wrap"},c=["disabled"],m=["disabled"],p={key:0,class:"fas fa-spinner fa-spin"},h={key:1},g=l((()=>(0,e._)("div",{class:"label"},"이메일 인증코드",-1))),w={class:"input-wrap"},f={class:"input-box"},b=["disabled"],k={class:"time"},v=["disabled"],_={key:0,class:"fas fa-spinner fa-spin"},y={key:1},T={style:{"margin-top":"20px",background:"#ddd",padding:"10px","line-height":"1.25"}},S=l((()=>(0,e._)("br",null,null,-1))),x=(0,e.Uk)("메일함을 확인하세요."),D={key:1,style:{"max-width":"350px",margin:"0 auto"}},C={class:"alert-green pc-only"},q=l((()=>(0,e._)("span",{class:"fas fa-check"},null,-1))),I={style:{"font-weight":"bold"}},Z={class:"alert-green mobile-only"},E=l((()=>(0,e._)("span",{class:"fas fa-check"},null,-1))),P={style:{"font-weight":"bold"}},R=l((()=>(0,e._)("div",{class:"label"},"새 비밀번호 입력",-1))),U={class:"input-wrap"},z=["disabled"],L=l((()=>(0,e._)("div",{class:"label"},"비밀번호 재입력",-1))),V={class:"input-wrap"},W=["disabled"],M={style:{"text-align":"right"}},$=["disabled"],F={key:0,class:"fas fa-spinner fa-spin"},j={key:1},H={key:2,class:"container form"},Y=l((()=>(0,e._)("div",{class:"form-title"},[(0,e._)("i",{class:"far fa-check-circle",style:{"font-size":"60px",color:"green"}})],-1))),A=l((()=>(0,e._)("div",{class:"form-title"},"비밀번호 재설정 완료",-1))),B={key:0,class:"form-nav"},G=l((()=>(0,e._)("button",{style:{padding:"15px 20px"}},"홈으로",-1))),J={key:1,class:"form-nav"},K=l((()=>(0,e._)("button",{style:{padding:"15px 20px"}},"로그인 페이지로",-1)));function N(i,s,t,l,N,O){const Q=(0,e.up)("router-link");return(0,e.wg)(),(0,e.iD)("div",o,[1===N.step?((0,e.wg)(),(0,e.iD)("div",r,[d,(0,e._)("div",u,[(0,e.wy)((0,e._)("input",{placeholder:"","onUpdate:modelValue":s[0]||(s[0]=i=>N.email=i),disabled:!!N.issueToken||N.isSubmitting||N.core.isLoggedIn},null,8,c),[[a.nr,N.email]]),(0,e._)("button",{onClick:s[1]||(s[1]=i=>{O.submit1()}),disabled:!!N.issueToken||N.isSubmitting},[N.isSubmitting&&!N.issueToken?((0,e.wg)(),(0,e.iD)("span",p)):(0,e.kq)("",!0),!N.isSubmitting||N.issueToken?((0,e.wg)(),(0,e.iD)("span",h,"인증진행")):(0,e.kq)("",!0)],8,m)]),N.issueToken?((0,e.wg)(),(0,e.iD)(e.HY,{key:0},[g,(0,e._)("div",w,[(0,e._)("div",f,[(0,e.wy)((0,e._)("input",{placeholder:"","onUpdate:modelValue":s[2]||(s[2]=i=>N.authCode=i),disabled:N.isSubmitting,ref:"authCodeInput"},null,8,b),[[a.nr,N.authCode]]),(0,e._)("div",k,(0,n.zw)(O.timerFormat(N.authExpireTime-N.nowTime)),1)]),(0,e._)("button",{onClick:s[3]||(s[3]=i=>{O.submit2()}),disabled:N.isSubmitting},[N.isSubmitting?((0,e.wg)(),(0,e.iD)("span",_)):(0,e.kq)("",!0),N.isSubmitting?(0,e.kq)("",!0):((0,e.wg)(),(0,e.iD)("span",y,"확인"))],8,v)]),(0,e._)("div",T,[(0,e.Uk)((0,n.zw)(N.email)+"로 인증코드를 발송했습니다.",1),S,x])],64)):(0,e.kq)("",!0)])):(0,e.kq)("",!0),2===N.step?((0,e.wg)(),(0,e.iD)("div",D,[(0,e._)("div",C,[q,(0,e._)("span",I," 이메일 인증성공 ("+(0,n.zw)(N.email)+")",1)]),(0,e._)("div",Z,[E,(0,e._)("span",P," "+(0,n.zw)(N.email),1)]),R,(0,e._)("div",U,[(0,e.wy)((0,e._)("input",{placeholder:"",type:"password","onUpdate:modelValue":s[4]||(s[4]=i=>N.password=i),disabled:N.isSubmitting,class:"input-w"},null,8,z),[[a.nr,N.password]])]),L,(0,e._)("div",V,[(0,e.wy)((0,e._)("input",{placeholder:"",type:"password","onUpdate:modelValue":s[5]||(s[5]=i=>N.passwordRe=i),disabled:N.isSubmitting,class:"input-w"},null,8,W),[[a.nr,N.passwordRe]])]),(0,e._)("div",M,[(0,e._)("button",{class:"btn-submit",onClick:s[6]||(s[6]=i=>{O.submit3()}),disabled:N.isSubmitting},[N.isSubmitting?((0,e.wg)(),(0,e.iD)("span",F)):(0,e.kq)("",!0),N.isSubmitting?(0,e.kq)("",!0):((0,e.wg)(),(0,e.iD)("span",j,"확인"))],8,$)])])):(0,e.kq)("",!0),3===N.step?((0,e.wg)(),(0,e.iD)("div",H,[Y,A,N.core.isLoggedIn?((0,e.wg)(),(0,e.iD)("div",B,[(0,e.Wm)(Q,{to:"/"},{default:(0,e.w5)((()=>[G])),_:1})])):(0,e.kq)("",!0),N.core.isLoggedIn?(0,e.kq)("",!0):((0,e.wg)(),(0,e.iD)("div",J,[(0,e.Wm)(Q,{to:"/auth/login"},{default:(0,e.w5)((()=>[K])),_:1})]))])):(0,e.kq)("",!0)])}var O=t(1921),Q=t(8259),X={created(){this.interval1=setInterval((()=>{this.nowTime=(new Date).getTime(),1===this.step&&this.authExpireTime&&(new Date).getTime()>this.authExpireTime&&(this.authExpireTime=null,this.issueToken=null,alert("인증번호 입력시간이 만료 되었습니다."))}),10)},unmounted(){clearInterval(this.interval1)},inject:["core"],methods:{timerFormat(i){return`${String(Math.floor(i/6e4)).padStart(2,"0")}:${String(Math.floor(i%6e4/1e3)).padStart(2,"0")}`},async submit1(){if(!this.isSubmitting)if(this.email=this.email.trim(),this.email&&(0,Q.lm)(this.email)){this.isSubmitting=!0;try{const i=(new Date).getTime(),s=await O.Z.resetPw1({email:this.email});this.authExpireTime=i+s.data.remainMillisecond,this.issueToken=s.data.issueToken,setTimeout((()=>this.$refs.authCodeInput.focus()))}catch(i){}this.isSubmitting=!1}else alert("올바른 이메일을 입력하세요.")},async submit2(){if(!this.isSubmitting)if(this.authCode){this.isSubmitting=!0;try{const i=await O.Z.resetPw2({email:this.email,issueToken:this.issueToken,authCode:this.authCode});this.confirmToken=i.data.confirmToken,this.step=2}catch(i){}this.isSubmitting=!1}else alert("이메일 인증코드를 입력하세요.")},async submit3(){if(!this.isSubmitting&&confirm("입력한 정보를 새로운 비밀번호로 설정하겠습니까?"))if(this.password)if(this.password===this.passwordRe){this.isSubmitting=!0;try{const i=await O.Z.resetPw3({email:this.email,confirmToken:this.confirmToken,newPassword:this.password,newPasswordConfirm:this.passwordRe});this.confirmToken=i.data.confirmToken,this.step=3}catch(i){}this.isSubmitting=!1}else alert("비밀번호 재입력 항목이 올바르지 않습니다.");else alert("새 비밀번호를 입력하세요.")}},data(){return{core:this.core.state,step:1,nowTime:null,interval1:null,isSubmitting:!1,issueToken:null,authExpireTime:null,confirmToken:null,email:this.core.state.isLoggedIn?this.core.state.user.email:"",password:"",passwordRe:"",authCode:"",logout:this.core.logout}}},ii=t(89);const si=(0,ii.Z)(X,[["render",N],["__scopeId","data-v-3279f0ab"]]);var ti=si},5105:function(i,s,t){t.r(s),t.d(s,{default:function(){return w}});var e=t(3396),a=t(9574);const n=i=>((0,e.dD)("data-v-21d7c71f"),i=i(),(0,e.Cn)(),i),l={class:"wrapper"},o={class:"container"},r=n((()=>(0,e._)("div",{class:"logo-wrap"},[(0,e._)("img",{src:a,class:"logo"})],-1))),d={class:"login-wrap"},u=n((()=>(0,e._)("div",{class:"title"},"비밀번호 재설정",-1)));function c(i,s,t,a,n,c){const m=(0,e.up)("router-link"),p=(0,e.up)("reset-password");return(0,e.wg)(),(0,e.iD)("div",l,[(0,e._)("div",o,[(0,e.Wm)(m,{to:"/"},{default:(0,e.w5)((()=>[r])),_:1}),(0,e._)("div",d,[u,(0,e.Wm)(p,{ref:"child"},null,512)])])])}var m=t(742),p={components:{ResetPassword:m.Z},mounted(){document.title="비밀번호 재설정"}};var h=t(89);const g=(0,h.Z)(p,[["render",c],["__scopeId","data-v-21d7c71f"]]);var w=g},9574:function(i,s,t){i.exports=t.p+"img/logo.f409aff1.svg"}}]);
//# sourceMappingURL=105.23b6ad74.js.map